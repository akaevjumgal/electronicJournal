<!DOCTYPE html>
<html lang="ru" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Журнал</title>
    <!-- <link rel="stylesheet" href="css/semantic.css"> -->
    <link rel="stylesheet" href="css/webix.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>
  <body>



    <div id="box" style="width: 100%;"></div>



  <script src="js/jquery-3.3.1.js"></script>
  <script src="js/webix.js" charset="utf-8"></script>
  <script src="js/axios.js" charset="utf-8"></script>

  <script>
  var grid_data = [
  {
    "email": "nabakirov@gmail.com",
    "full_name": "Абакиров Нурсултан",
    "group_id": 1,
    "id": 1,
    "grade": "80",
    "status_id": 1
  },
  {
    "email": "akaev@gmail.com",
    "full_name": "Nurlan\n",
    "group_id": 1,
    "id": 2,
    "grade": "60",
    "status_id": 1
  },
  {
    "email": "Orgen@mail.ru",
    "full_name": "Максатбеков",
    "group_id": 1,
    "id": 4,
    "grade": "70",
    "status_id": 1
  }
]

this.grid = new webix.ui({
  container: "box",
  view:"datatable",
  data: grid_data,
  leftSplit: 1,
  autoheight: true,
  resizeColumn:true,
  resizeRow: true,
  scrollX: true,
     columns:[
      { id:"full_name", header:"Ф.И.О", adjust: true},
     ],

});


  axios.get("https://ejj.herokuapp.com/get_date/id=1&dis=1&sub=1&type=1")
  .then(response => {
    date = response.data;
    var columns = webix.toArray(this.grid.config.columns);
    var mas=["Пр","Оц","Комм"];
    kj=0;
    for(var i = 0; i <date.length ; i++){
      t=0;
      for(var j = 0; j < date[i].dates.length; j++){
        for(var k=0;k<3;k++){
          n = date[i].dates.length;
          kj++;
          if(k==0){
            t=3;
          }else{
            t=0;
          }
          columns.insertAt({
            id: "",
            header: [{text: date[i].month, colspan: n*3 , css:{"text-align": "center"}}, {text:date[i].dates[j], colspan: t}, {text:mas[k]}],
          },kj);
          n = 0;
        }
      }
    }
    this.grid.refreshColumns();
  })



// url:"http://10.42.0.1:5000/get_date/id=1&dis=1&sub=1&type=1"

  </script>
  </body>
</html>
